import{a as j,b as w}from"./chunk-CHYCQ2AE.js";import{a as N}from"./chunk-K62FGD3B.js";import{b as P,e as O}from"./chunk-J7KBKSMN.js";import"./chunk-ICTHBN6B.js";import"./chunk-CJWJOAWH.js";import{j as b,m as x}from"./chunk-SZWDHQBB.js";import{Bb as c,Cb as f,Jb as v,Ka as R,Na as l,Oa as u,bb as m,db as d,ga as z,hb as o,ib as s,jb as g,ka as h,nb as T,pb as C,qb as p,ua as D,ub as E,va as M}from"./chunk-ISEL6VX3.js";function U(i,n){if(i&1&&(o(0,"h1",6),c(1),s()),i&2){let r=p(2);l(),f(r.counter)}}function X(i,n){if(i&1&&(o(0,"div",1)(1,"h2",2),c(2,"El juego comienza en:"),s(),m(3,U,2,1,"h1",3),o(4,"div",4),g(5,"mat-spinner",5),s()()),i&2){let r=p();l(3),d("ngIf",r.counter>0)}}var A=(()=>{let n=class n{constructor(t){this.dialogRef=t,this.counter=3}ngOnInit(){this.startCountdown()}startCountdown(){this.interval=setInterval(()=>{this.counter>1?this.counter--:(this.counter=0,clearInterval(this.interval),this.dialogRef.close())},1e3)}};n.\u0275fac=function(e){return new(e||n)(u(P))},n.\u0275cmp=h({type:n,selectors:[["app-spiner"]],standalone:!0,features:[v],decls:1,vars:1,consts:[["class","spinner-container","mat-dialog-content","",4,"ngIf"],["mat-dialog-content","",1,"spinner-container"],["mat-dialog-title","",1,"d-flex","text-center"],["class","text-center countdown",4,"ngIf"],[1,"d-flex","jaumeustify-content-center"],["diameter","100",2,"margin-top","20px"],[1,"text-center","countdown"]],template:function(e,a){e&1&&m(0,X,6,1,"div",0),e&2&&d("ngIf",a.counter>0)},dependencies:[x,b,w,j],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:30vh}.countdown[_ngcontent-%COMP%]{font-size:2rem;margin-top:1rem}"]});let i=n;return i})();function H(i,n){if(i&1){let r=T();o(0,"button",9),C("click",function(){D(r);let e=p();return M(e.play())}),c(1,"Comenzar"),s()}if(i&2){let r=p();d("disabled",r.botonDeshabilitado)}}var ot=(()=>{let n=class n{constructor(t){this.miDialog=t,this.zombies=[],this.vidas=3,this.puntos=0,this.timeSpawn=2e3,this.minSpawnTime=500,this.spawnReductionRate=100,this.botonDeshabilitado=!1,this.countdown=3,this.showSpinner=!1,this.dialog=z(N)}ngAfterViewInit(){this.container=document.querySelector("#divTotal")}ngOnDestroy(){this.vidas=0,this.spawnIntervalId&&(clearInterval(this.spawnIntervalId),this.miDialog.closeAll())}capturarClick(t){t.target.classList.contains("zombie")&&(this.puntos++,t.target.remove(),this.adjustSpawnInterval())}spawnZombie(){if(console.log(this.vidas),this.vidas>0){let t=document.createElement("div");t.setAttribute("class","zombie"),t.setAttribute("draggable","false"),this.container.appendChild(t),this.zombies.push(t);let e=this.getRandom(240,480),a=e*.625,I=this.getRandom(0,160),y=480,S=240,_=45,Z=49-_,$=(e-S)/(y-S),F=_+$*Z;t.style.backgroundImage="url('../../../../assets/resistenciazombie/zombie.png')",t.style.backgroundSize="cover",t.style.backgroundRepeat="no-repeat",t.style.position="absolute",t.style.top=`${F}vh`,t.style.left=`${I}vh`,t.style.width=`${a}px`,t.style.height=`${e}px`,t.style.userSelect="none",t.style.border="none",t.style.padding="0",t.style.margin="0",t.style.boxSizing="border-box",setTimeout(()=>{t.parentNode&&(t.parentNode.removeChild(t),this.vidas--,this.vidas>0||(clearInterval(this.spawnIntervalId),this.openDialog(1),this.zombies.forEach(k=>{k.parentNode?.removeChild(k)})))},1e3)}}getRandom(t,e){return Math.floor(Math.random()*(e-t+1))+t}play(){this.botonDeshabilitado=!0,this.vidas=3,this.miDialog.open(A,{width:"50vh",disableClose:!0}).afterClosed().subscribe(()=>{this.vidas>0&&(this.puntos=0,this.timeSpawn=2e3,this.spawnZombie(),this.spawnIntervalId=setInterval(this.spawnZombie.bind(this),this.timeSpawn))})}adjustSpawnInterval(){this.timeSpawn>this.minSpawnTime&&(this.timeSpawn-=this.spawnReductionRate,clearInterval(this.spawnIntervalId),this.spawnIntervalId=setInterval(this.spawnZombie.bind(this),this.timeSpawn))}openDialog(t){switch(this.botonDeshabilitado=!0,t){case 1:this.puntos>0?this.dialog.openDialog({tittle:"JUEGO TERMINADO",content:`Conseguiste matar: ${this.puntos} zombies.`,img:"../../../assets/victoria.png",retryAction:()=>this.play(),btn:"Jugar de Nuevo"}):this.dialog.openDialog({tittle:"PERDISTE",content:"Sigue intentando. No te rindas!",img:"../../../assets/derrota.png",retryAction:()=>this.play(),btn:"Jugar de Nuevo"});break;case 2:this.dialog.openDialog({tittle:"ESTAS LISTO?",content:"Oprime comenzar para iniciar el juego",img:"../../../assets/estaslisto.png",retryAction:()=>this.play(),btn:"Comenzar"});break}}};n.\u0275fac=function(e){return new(e||n)(u(O))},n.\u0275cmp=h({type:n,selectors:[["app-resistenciazombie"]],standalone:!0,features:[v],decls:11,vars:4,consts:[["id","divTotal",2,"top","100px",3,"click"],[1,"container-fluid","d-flex","align-items-center",2,"position","absolute","top","6vh","width","100%"],[2,"color","red","font-size","5vh","font-family","Rubik Wet Paint, sans-serif","padding","2vh"],[2,"color","black"],["draggable","false",1,"ms-auto",2,"user-select","none",3,"src"],[1,"container","d-flex","justify-content-center","align-items-center",2,"height","100vh"],[1,"row"],[1,"col-sm-12","text-center",2,"position","relative"],[3,"disabled","click",4,"ngIf"],[3,"click","disabled"]],template:function(e,a){e&1&&(o(0,"div",0),C("click",function(y){return a.capturarClick(y)}),o(1,"div",1)(2,"p",2),c(3,"Puntos: "),o(4,"span",3),c(5),s()(),g(6,"img",4),s(),o(7,"div",5)(8,"div",6)(9,"div",7),m(10,H,2,1,"button",8),s()()()()),e&2&&(l(5),f(a.puntos),l(),E("src","../../../../assets/resistenciazombie/vidas/vida.",a.vidas,".png",R),l(4),d("ngIf",a.botonDeshabilitado==!1))},dependencies:[w,x,b],styles:['*[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}#divTotal[_ngcontent-%COMP%]{height:100%;background-image:url("./media/fondo-XKB4DENZ.webp");background-repeat:no-repeat;background-size:cover;cursor:url("./media/cursor-REQE3WCX.png"),auto;width:100%}.bloodSpot[_ngcontent-%COMP%]{position:absolute;width:50px;height:50px;background-image:url("./media/blood-spot-XCU5YNC4.png");background-size:cover;pointer-events:none;opacity:.5}button[_ngcontent-%COMP%]{height:8vh;width:20vh;background-color:#4caf50;color:#fff;border:none;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:3vh;margin:4px 2px;cursor:pointer;transition:background-color .3s,transform .3s}button[_ngcontent-%COMP%]:hover{background-color:#45a049}button[_ngcontent-%COMP%]:active{background-color:#317835;transform:scale(.98)}']});let i=n;return i})();export{ot as ResistenciazombieComponent};
